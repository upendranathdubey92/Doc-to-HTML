<!DOCTYPE html>
<html>
<head>
    <title>Debug BENEFITS2 Detection</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 200px; }
        .results { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
        .step { margin: 10px 0; padding: 10px; background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>BENEFITS2 Detection Debug</h1>
    
    <textarea id="testContent">[BENEFITS2]
Key Benefits of Web Development Consulting Services
Partnering with a web development consulting company offers more than just technical guidance; it delivers strategic insights, tailored solutions, and expert recommendations to elevate your digital presence.
Eliminate Performance Issues
Transform slow-loading websites that drive customers away into fast, responsive platforms.
[BENEFITS2 END]</textarea>
    
    <br><br>
    <button onclick="debugDetection()">Debug Detection</button>
    
    <div id="results" class="results"></div>

    <script>
        const supportedSections = ['HERO', 'FAQ', 'CTA_SIMPLE', 'CTA_ENHANCED', 'PROCESS', 'TECHNOLOGY', 'INDUSTRIES', 'SERVICES_GRID', 'SERVICES_ACCORDION', 'PORTFOLIO', 'TESTIMONIAL', 'BENEFITS', 'BENEFITS2', 'CONTENT_FORM'];
        
        function debugDetection() {
            const content = document.getElementById('testContent').value;
            const resultsDiv = document.getElementById('results');
            
            // Step 1: Check raw pattern matching
            const sectionPattern = /\[([A-Z_\s]+)\]/g;
            const matches = [...content.matchAll(sectionPattern)];
            const allMatches = matches.map(match => match[1].trim());
            
            let html = '<div class="step">';
            html += '<h3>Step 1: Raw Pattern Matches</h3>';
            html += '<p><strong>Pattern:</strong> /\\[([A-Z_\\s]+)\\]/g</p>';
            html += '<p><strong>All matches found:</strong> ' + JSON.stringify(allMatches) + '</p>';
            html += '</div>';
            
            // Step 2: Check uniqueness
            const uniqueMatches = [...new Set(allMatches)];
            html += '<div class="step">';
            html += '<h3>Step 2: Unique Matches</h3>';
            html += '<p><strong>Unique matches:</strong> ' + JSON.stringify(uniqueMatches) + '</p>';
            html += '</div>';
            
            // Step 3: Check supported sections filter
            html += '<div class="step">';
            html += '<h3>Step 3: Supported Sections Check</h3>';
            html += '<p><strong>Supported sections:</strong> ' + JSON.stringify(supportedSections) + '</p>';
            
            uniqueMatches.forEach(section => {
                const isSupported = supportedSections.some(supported => 
                    section.includes(supported) || supported.includes(section)
                );
                html += '<p><strong>' + section + ':</strong> ' + (isSupported ? '✅ Supported' : '❌ Not supported') + '</p>';
                
                // Show detailed matching
                const matchingSupported = supportedSections.filter(supported => 
                    section.includes(supported) || supported.includes(section)
                );
                if (matchingSupported.length > 0) {
                    html += '<p>&nbsp;&nbsp;→ Matches: ' + JSON.stringify(matchingSupported) + '</p>';
                }
            });
            html += '</div>';
            
            // Step 4: Final filtered result
            const finalResult = uniqueMatches.filter(section => 
                supportedSections.some(supported => 
                    section.includes(supported) || supported.includes(section)
                )
            );
            
            html += '<div class="step">';
            html += '<h3>Step 4: Final Detected Sections</h3>';
            html += '<p><strong>Final result:</strong> ' + JSON.stringify(finalResult) + '</p>';
            html += '<p><strong>Count:</strong> ' + finalResult.length + '</p>';
            html += '</div>';
            
            // Step 5: Test specific BENEFITS2 cases
            html += '<div class="step">';
            html += '<h3>Step 5: BENEFITS2 Specific Tests</h3>';
            html += '<p><strong>"BENEFITS2" in supportedSections:</strong> ' + supportedSections.includes('BENEFITS2') + '</p>';
            html += '<p><strong>"BENEFITS2".includes("BENEFITS2"):</strong> ' + "BENEFITS2".includes("BENEFITS2") + '</p>';
            html += '<p><strong>"BENEFITS2 END".includes("BENEFITS2"):</strong> ' + "BENEFITS2 END".includes("BENEFITS2") + '</p>';
            html += '<p><strong>"BENEFITS2".includes("BENEFITS2 END"):</strong> ' + "BENEFITS2".includes("BENEFITS2 END") + '</p>';
            html += '</div>';
            
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html>