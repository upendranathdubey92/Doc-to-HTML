<!DOCTYPE html>
<html>
<head>
    <title>Final BENEFITS2 Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 400px; font-family: monospace; }
        .results { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
        .success { background: #e8f5e8; color: #2e7d32; padding: 10px; margin: 10px 0; }
        .error { background: #ffebee; color: #c62828; padding: 10px; margin: 10px 0; }
        .step { margin: 15px 0; padding: 15px; background: #f5f5f5; border-left: 4px solid #2196F3; }
        pre { background: #f8f8f8; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Final BENEFITS2 Test - Complete Web IDE Simulation</h1>
    
    <p><strong>Instructions:</strong> The textarea below contains your exact BENEFITS2 content. Click "Test Full Process" to simulate the complete web IDE workflow.</p>
    
    <textarea id="testContent">[BENEFITS2]
Why Space-O Technologies is Your Strategic Partner for Web Development Consulting Services
From crashing servers to abandoned carts, we help CTOs navigate the technical challenges that stall growth. Our web consulting services bring clarity to complex architecture decisions, reduce technical debt, and build a solid foundation for what's next.
Strategic Technology Roadmapping
Our consulting services include long-term technology planning aligned with business growth objectives. We create detailed roadmaps for web platform evolution, feature prioritization, and resource allocation optimization.
Data-Driven Architecture Decisions
No guesswork here at Space-O Technologies. We analyze your traffic patterns, growth projections, and integration needs to recommend technologies that align with your roadmap, not just the trending frameworks everyone's talking about.
Cost-Effective Consulting Models
We offer flexible engagement options including project-based, retainer, and hybrid consulting models. Space-O Technologies consistently delivers web development consulting at 30-40% lower costs than traditional enterprise consulting firms.
Certified Technology Partnerships
Space-O Technologies maintains official partnerships with AWS, Google Cloud, and Microsoft Azure. Our certified consultants leverage these relationships to provide enterprise-grade web development solutions with preferential support.
24/7 Critical Support Coverage
Our web development consultants provide round-the-clock emergency support for critical system issues. We maintain a dedicated team of on-call consultants to promptly address performance degradation, security incidents, and infrastructure failures.
Industry-Specific Solutions
From e-commerce conversion optimization to SaaS performance scaling, we understand sector-specific challenges. Your healthcare compliance needs or fintech security requirements aren't foreign concepts to us‚Äîthey're our expertise.
[BENEFITS2 END]</textarea>
    
    <br><br>
    <button onclick="testFullProcess()" style="background: #2196F3; color: white; padding: 10px 20px; border: none; border-radius: 4px; font-size: 16px;">Test Full Process</button>
    
    <div id="results" class="results"></div>

    <script>
        const supportedSections = ['HERO', 'FAQ', 'CTA_SIMPLE', 'CTA_ENHANCED', 'PROCESS', 'TECHNOLOGY', 'INDUSTRIES', 'SERVICES_GRID', 'SERVICES_ACCORDION', 'PORTFOLIO', 'TESTIMONIAL', 'BENEFITS', 'BENEFITS2', 'CONTENT_FORM'];
        
        // EXACT WEB IDE LOGIC
        function detectSections(content) {
            const sectionPattern = /\[([A-Z_\s]+)\]/g;
            const matches = [...content.matchAll(sectionPattern)];
            const detected = matches.map(match => match[1].trim());
            
            // Filter out END markers and only keep supported sections
            return [...new Set(detected)]
                .filter(section => !section.endsWith(' END'))
                .filter(section => 
                    supportedSections.some(supported => 
                        section.includes(supported) || supported.includes(section)
                    )
                );
        }
        
        function parseBenefits2Section(content) {
            const lines = content.split('\\n').filter(line => line.trim());
            
            let main_heading = '';
            let description = '';
            let benefits = [];
            let currentIndex = 0;
            
            // First line is heading
            if (lines.length > 0) {
                main_heading = lines[0].trim();
                currentIndex = 1;
            }
            
            // Second line is description
            if (lines.length > 1) {
                description = lines[1].trim();
                currentIndex = 2;
            }
            
            // Parse benefits - they follow title/description pairs
            let i = currentIndex;
            while (i < lines.length) {
                if (i + 1 < lines.length) {
                    const title = lines[i];
                    const benefit_desc = lines[i + 1];
                    benefits.push({'title': title, 'description': benefit_desc});
                    i += 2;
                } else {
                    // Last item without description
                    benefits.push({'title': lines[i], 'description': ''});
                    i += 1;
                }
            }
            
            return {
                main_heading: main_heading || "Why Choose Space-O Technologies",
                description: description || "Partner with us for expert web development consulting.",
                benefits: benefits
            };
        }
        
        async function testFullProcess() {
            const content = document.getElementById('testContent').value;
            const resultsDiv = document.getElementById('results');
            
            let html = '<h2>Complete Web IDE Process Test</h2>';
            
            try {
                // Step 1: Detection
                html += '<div class="step">';
                html += '<h3>Step 1: Section Detection</h3>';
                const detectedSections = detectSections(content);
                html += `<p><strong>Detected sections:</strong> ${JSON.stringify(detectedSections)}</p>`;
                html += `<p><strong>Section count:</strong> ${detectedSections.length}</p>`;
                
                if (detectedSections.length === 0) {
                    html += '<div class="error">‚ùå Error: No valid sections found in document</div>';
                    html += '</div>';
                    resultsDiv.innerHTML = html;
                    return;
                } else {
                    html += '<div class="success">‚úÖ Success: Sections detected!</div>';
                }
                html += '</div>';
                
                // Step 2: Content Parsing
                html += '<div class="step">';
                html += '<h3>Step 2: Content Parsing</h3>';
                
                // Simulate parsing like the web IDE does
                const lines = content.split('\\n');
                let currentSection = null;
                let currentContent = [];
                const sections = {};
                
                for (let line of lines) {
                    const trimmedLine = line.trim();
                    
                    // Check for section start markers
                    const sectionStartMatch = trimmedLine.match(/^\\[([A-Z_\\s]+)\\]$/);
                    if (sectionStartMatch && !sectionStartMatch[1].endsWith(' END')) {
                        // Save previous section if exists
                        if (currentSection && currentContent.length > 0) {
                            const contentText = currentContent.join('\\n').trim();
                            sections[currentSection] = parseBenefits2Section(contentText);
                        }
                        
                        // Start new section
                        currentSection = sectionStartMatch[1].trim();
                        currentContent = [];
                    }
                    // Check for section end markers
                    else if (trimmedLine.match(/^\\[([A-Z_\\s]+) END\\]$/)) {
                        // End current section
                        if (currentSection && currentContent.length > 0) {
                            const contentText = currentContent.join('\\n').trim();
                            sections[currentSection] = parseBenefits2Section(contentText);
                        }
                        
                        currentSection = null;
                        currentContent = [];
                    }
                    // Add content to current section
                    else if (currentSection) {
                        currentContent.push(line);
                    }
                }
                
                html += `<p><strong>Parsed sections:</strong> ${JSON.stringify(Object.keys(sections))}</p>`;
                
                if (sections.BENEFITS2) {
                    html += `<p><strong>BENEFITS2 heading:</strong> ${sections.BENEFITS2.main_heading}</p>`;
                    html += `<p><strong>BENEFITS2 benefits count:</strong> ${sections.BENEFITS2.benefits ? sections.BENEFITS2.benefits.length : 0}</p>`;
                    html += '<div class="success">‚úÖ Success: BENEFITS2 section parsed!</div>';
                } else {
                    html += '<div class="error">‚ùå Error: BENEFITS2 section not parsed</div>';
                }
                html += '</div>';
                
                // Step 3: Final Result
                html += '<div class="step">';
                html += '<h3>Step 3: Final Result</h3>';
                
                if (sections.BENEFITS2) {
                    html += '<div class="success">üéâ <strong>SUCCESS!</strong> Your BENEFITS2 content should work perfectly in the web IDE!</div>';
                    html += '<p><strong>What this means:</strong></p>';
                    html += '<ul>';
                    html += '<li>‚úÖ Section is detected correctly</li>';
                    html += '<li>‚úÖ Content is parsed into title/description pairs</li>';
                    html += '<li>‚úÖ HTML will be generated with the exact structure you want</li>';
                    html += '</ul>';
                    
                    html += '<p><strong>Debug info:</strong></p>';
                    html += `<pre>${JSON.stringify(sections.BENEFITS2, null, 2)}</pre>`;
                } else {
                    html += '<div class="error">‚ùå <strong>FAILED!</strong> There is still an issue with the processing.</div>';
                }
                html += '</div>';
                
            } catch (error) {
                html += '<div class="error">‚ùå <strong>JavaScript Error:</strong> ' + error.message + '</div>';
            }
            
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html>