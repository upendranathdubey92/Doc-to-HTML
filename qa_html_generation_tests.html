<!DOCTYPE html>
<html>
<head>
    <title>QA HTML Generation Tests</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-suite { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .test-case { margin: 15px 0; padding: 15px; border-left: 4px solid #ddd; background: #fafafa; }
        .test-pass { border-left-color: #4caf50; background: #f1f8e9; }
        .test-fail { border-left-color: #f44336; background: #ffebee; }
        .test-title { font-weight: bold; margin-bottom: 10px; }
        .test-result { font-size: 14px; margin: 5px 0; }
        .html-preview { background: #f8f8f8; padding: 10px; margin: 10px 0; font-family: monospace; font-size: 11px; max-height: 300px; overflow-y: auto; border: 1px solid #ddd; }
        .stats { background: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 4px; }
        .run-all { background: #2196f3; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin: 20px 0; }
        .run-all:hover { background: #1976d2; }
        h1 { color: #333; text-align: center; }
        h2 { color: #555; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
        .validation { background: #fff3e0; padding: 10px; margin: 10px 0; border-left: 4px solid #ff9800; }
    </style>
</head>
<body>
    <h1>🔧 QA HTML Generation Tests</h1>
    <div class="stats" id="testStats">
        <strong>Test Status:</strong> Ready to test HTML generation for all sections
    </div>
    
    <button class="run-all" onclick="runAllHtmlTests()">🚀 Run HTML Generation Tests</button>
    
    <div id="testResults"></div>

    <script>
        // Simplified HTML generation functions for testing
        const htmlGenerators = {
            HERO: (content) => {
                const lines = content.split('\n').filter(line => line.trim());
                const title = lines[0] || 'Default Title';
                const description = lines[1] || 'Default Description';
                const bullets = lines.filter(line => line.includes('●')).map(b => b.replace('●', '').trim());
                
                let bulletsHtml = bullets.map(bullet => `<li>${bullet}</li>`).join('\n');
                
                return `<section class="hero-section">
<div class="container">
<h1>${title}</h1>
<p>${description}</p>
<ul>
${bulletsHtml}
</ul>
</div>
</section>`;
            },

            FAQ: (content) => {
                const lines = content.split('\n').filter(line => line.trim());
                const title = lines[0] || 'FAQ';
                const description = lines[1] || 'Frequently Asked Questions';
                
                let faqHtml = '';
                for (let i = 2; i < lines.length; i += 2) {
                    if (i + 1 < lines.length) {
                        const question = lines[i];
                        const answer = lines[i + 1];
                        faqHtml += `<div class="faq-item">
<h3>${question}</h3>
<p>${answer}</p>
</div>\n`;
                    }
                }
                
                return `<section class="faq-section">
<div class="container">
<h2>${title}</h2>
<p>${description}</p>
${faqHtml}
</div>
</section>`;
            },

            CTA_SIMPLE: (content) => {
                const lines = content.split('\n').filter(line => line.trim());
                const title = lines[0] || 'Call to Action';
                const description = lines[1] || 'Description';
                const buttonText = lines[2] || 'Click Here';
                
                return `<section class="cta-simple">
<div class="container">
<h2>${title}</h2>
<p>${description}</p>
<button class="btn btn-primary">${buttonText}</button>
</div>
</section>`;
            },

            CTA_TWO: (content) => {
                const lines = content.split('\n').filter(line => line.trim());
                const title = lines[0] || 'Ready to Build?';
                const description = lines[1] || 'Get started today';
                
                let statsHtml = '';
                for (let i = 2; i < lines.length; i += 2) {
                    if (lines[i] && /\d/.test(lines[i]) && lines[i].length < 10) {
                        const stat = lines[i];
                        const desc = lines[i + 1] || '';
                        statsHtml += `<div class="stat-item">
<strong>${stat}</strong> ${desc}
</div>\n`;
                    }
                }
                
                return `<section class="pt50 pb80 new-cta-section">
<div class="container-xl">
<div class="cta-inner">
<h2 class="cta-title">${title}</h2>
<p>${description}</p>
<div class="new-button-group">
${statsHtml}
</div>
<div class="two-btn-group">
<button class="btn btn-pop">Request a Free Proposal</button>
<a class="btn btn-pop white-btn" href="/project/">View Portfolio</a>
</div>
</div>
</div>
</section>`;
            },

            BENEFITS_TWO: (content) => {
                const lines = content.split('\n').filter(line => line.trim());
                const title = lines[0] || 'Benefits';
                const description = lines[1] || 'Why choose us';
                
                let benefitsHtml = '';
                for (let i = 2; i < lines.length; i += 2) {
                    if (i + 1 < lines.length) {
                        const benefitTitle = lines[i];
                        const benefitDesc = lines[i + 1];
                        benefitsHtml += `<div class="benefit-item">
<h3>${benefitTitle}</h3>
<p>${benefitDesc}</p>
</div>\n`;
                    }
                }
                
                return `<section class="benefits-section">
<div class="container">
<h2>${title}</h2>
<p>${description}</p>
<div class="benefits-grid">
${benefitsHtml}
</div>
</div>
</section>`;
            },

            CONTENT_FORM: (content) => {
                const lines = content.split('\n').filter(line => line.trim());
                const title = lines[0] || 'Contact Form';
                const description = lines[1] || 'Get in touch';
                
                const fields = lines.slice(2).map(field => 
                    `<div class="form-group">
<label>${field}</label>
<input type="text" name="${field.toLowerCase().replace(/\s+/g, '_')}" class="form-control">
</div>`
                ).join('\n');
                
                return `<section class="content-form-section">
<div class="container">
<h2>${title}</h2>
<p>${description}</p>
<form class="contact-form">
${fields}
<button type="submit" class="btn btn-primary">Submit</button>
</form>
</div>
</section>`;
            }
        };

        // Test data
        const testData = {
            HERO: `Expert Web Development Services
Transform your business with custom web solutions that drive results and enhance user experience.

●Responsive Design & Development
●E-commerce Solutions
●Custom Web Applications
●SEO Optimization`,

            FAQ: `Frequently Asked Questions
Find answers to common questions about our web development services.

What technologies do you use?
We use modern frameworks like React, Vue.js, Node.js, and PHP to build scalable web applications.

How long does a project take?
Project timelines vary based on complexity, typically ranging from 4-12 weeks for custom solutions.`,

            CTA_SIMPLE: `Ready to Start Your Project?
Contact us today for a free consultation and project estimate.
Get Started Now`,

            CTA_TWO: `Ready to Build a Web Solution That Drives Results?
Whether you're a startup or an enterprise, we offer fully customized web development services built on the latest tech stacks to meet your business goals.

350+
Web Solutions Delivered

20+
Frameworks & Tools Mastered

100%
SEO & Mobile Optimized`,

            BENEFITS_TWO: `Why Choose Our Web Development Services
Experience the difference with our professional approach

Expertise
Over 15 years of experience in web development with cutting-edge technologies

Quality
We deliver high-quality, tested solutions that meet industry standards

Support
Ongoing maintenance and support to keep your website running smoothly`,

            CONTENT_FORM: `Get Your Free Web Development Quote
Tell us about your project and get a customized proposal

Your Name
Email Address
Phone Number
Project Description`
        };

        // HTML Generation Tests
        const htmlTestCases = [
            {
                name: "HERO Section HTML Generation",
                section: "HERO",
                test: () => {
                    const html = htmlGenerators.HERO(testData.HERO);
                    return {
                        generated: html.length > 0,
                        hasTitle: html.includes('Expert Web Development Services'),
                        hasBullets: html.includes('<li>'),
                        hasStructure: html.includes('<section class="hero-section">'),
                        htmlLength: html.length,
                        preview: html
                    };
                }
            },
            {
                name: "FAQ Section HTML Generation", 
                section: "FAQ",
                test: () => {
                    const html = htmlGenerators.FAQ(testData.FAQ);
                    return {
                        generated: html.length > 0,
                        hasQuestions: html.includes('<h3>'),
                        hasAnswers: html.includes('<p>'),
                        hasStructure: html.includes('<section class="faq-section">'),
                        questionCount: (html.match(/<h3>/g) || []).length,
                        preview: html
                    };
                }
            },
            {
                name: "CTA_SIMPLE Section HTML Generation",
                section: "CTA_SIMPLE", 
                test: () => {
                    const html = htmlGenerators.CTA_SIMPLE(testData.CTA_SIMPLE);
                    return {
                        generated: html.length > 0,
                        hasButton: html.includes('<button'),
                        hasTitle: html.includes('Ready to Start'),
                        hasStructure: html.includes('<section class="cta-simple">'),
                        preview: html
                    };
                }
            },
            {
                name: "CTA_TWO Section HTML Generation",
                section: "CTA_TWO",
                test: () => {
                    const html = htmlGenerators.CTA_TWO(testData.CTA_TWO);
                    return {
                        generated: html.length > 0,
                        hasStats: html.includes('<strong>350+</strong>'),
                        hasButtons: html.includes('Request a Free Proposal'),
                        hasStructure: html.includes('new-cta-section'),
                        statCount: (html.match(/<strong>/g) || []).length,
                        preview: html
                    };
                }
            },
            {
                name: "BENEFITS_TWO Section HTML Generation",
                section: "BENEFITS_TWO",
                test: () => {
                    const html = htmlGenerators.BENEFITS_TWO(testData.BENEFITS_TWO);
                    return {
                        generated: html.length > 0,
                        hasBenefits: html.includes('<h3>Expertise</h3>'),
                        hasDescriptions: html.includes('Over 15 years'),
                        hasStructure: html.includes('benefits-section'),
                        benefitCount: (html.match(/<h3>/g) || []).length,
                        preview: html
                    };
                }
            },
            {
                name: "CONTENT_FORM Section HTML Generation",
                section: "CONTENT_FORM",
                test: () => {
                    const html = htmlGenerators.CONTENT_FORM(testData.CONTENT_FORM);
                    return {
                        generated: html.length > 0,
                        hasForm: html.includes('<form'),
                        hasInputs: html.includes('<input'),
                        hasSubmit: html.includes('type="submit"'),
                        inputCount: (html.match(/<input/g) || []).length,
                        preview: html
                    };
                }
            },
            {
                name: "HTML Validation - No Script Tags",
                section: "ALL",
                test: () => {
                    let results = {};
                    for (let section in testData) {
                        if (htmlGenerators[section]) {
                            const html = htmlGenerators[section](testData[section]);
                            results[section] = {
                                hasScript: html.includes('<script'),
                                hasOnclick: html.includes('onclick'),
                                hasUnsafeHtml: /<script|javascript:|on\w+=/i.test(html)
                            };
                        }
                    }
                    return results;
                }
            },
            {
                name: "HTML Validation - Proper Structure",
                section: "ALL", 
                test: () => {
                    let results = {};
                    for (let section in testData) {
                        if (htmlGenerators[section]) {
                            const html = htmlGenerators[section](testData[section]);
                            results[section] = {
                                hasSection: html.includes('<section'),
                                hasContainer: html.includes('container'),
                                closedTags: html.split('<').length === html.split('>').length,
                                hasSemanticTags: /<h[1-6]|<p>|<div>|<section>/.test(html)
                            };
                        }
                    }
                    return results;
                }
            },
            {
                name: "Content Preservation - Original Text Maintained",
                section: "ALL",
                test: () => {
                    let results = {};
                    for (let section in testData) {
                        if (htmlGenerators[section]) {
                            const html = htmlGenerators[section](testData[section]);
                            const originalLines = testData[section].split('\n').filter(line => line.trim());
                            let preservedCount = 0;
                            
                            for (let line of originalLines) {
                                if (line.trim() && !line.includes('●') && html.includes(line.trim())) {
                                    preservedCount++;
                                }
                            }
                            
                            results[section] = {
                                originalLines: originalLines.length,
                                preservedLines: preservedCount,
                                preservationRate: (preservedCount / originalLines.length * 100).toFixed(1) + '%'
                            };
                        }
                    }
                    return results;
                }
            },
            {
                name: "Performance - HTML Generation Speed",
                section: "ALL",
                test: () => {
                    let results = {};
                    for (let section in testData) {
                        if (htmlGenerators[section]) {
                            const startTime = performance.now();
                            const html = htmlGenerators[section](testData[section]);
                            const endTime = performance.now();
                            
                            results[section] = {
                                generationTime: (endTime - startTime).toFixed(3) + 'ms',
                                htmlSize: html.length,
                                performance: (endTime - startTime) < 10 ? 'Good' : 'Slow'
                            };
                        }
                    }
                    return results;
                }
            }
        ];

        function runHtmlTest(testCase) {
            try {
                const result = testCase.test();
                return {
                    name: testCase.name,
                    section: testCase.section,
                    status: 'pass',
                    result: result,
                    error: null
                };
            } catch (error) {
                return {
                    name: testCase.name,
                    section: testCase.section,
                    status: 'fail', 
                    result: null,
                    error: error.message
                };
            }
        }

        function runAllHtmlTests() {
            const startTime = performance.now();
            const results = htmlTestCases.map(runHtmlTest);
            const endTime = performance.now();
            
            const passed = results.filter(r => r.status === 'pass').length;
            const failed = results.filter(r => r.status === 'fail').length;
            const total = results.length;
            
            // Update stats
            document.getElementById('testStats').innerHTML = `
                <strong>HTML Generation Tests:</strong> ${passed}/${total} passed (${failed} failed) | 
                <strong>Execution Time:</strong> ${(endTime - startTime).toFixed(2)}ms |
                <strong>Success Rate:</strong> ${((passed/total)*100).toFixed(1)}%
            `;
            
            // Display results
            const resultsHtml = generateHtmlResultsHtml(results);
            document.getElementById('testResults').innerHTML = resultsHtml;
        }

        function generateHtmlResultsHtml(results) {
            let html = '<div class="test-suite"><h2>🔧 HTML Generation Test Results</h2>';
            
            for (let result of results) {
                const cssClass = result.status === 'pass' ? 'test-pass' : 'test-fail';
                const icon = result.status === 'pass' ? '✅' : '❌';
                
                html += `<div class="test-case ${cssClass}">
                    <div class="test-title">${icon} ${result.name}</div>`;
                
                if (result.status === 'pass') {
                    html += `<div class="test-result">`;
                    
                    // Show specific validation results
                    if (typeof result.result === 'object' && result.result !== null) {
                        if (result.result.preview) {
                            html += `<div class="validation">
                                <strong>Generated HTML Preview:</strong>
                                <div class="html-preview">${escapeHtml(result.result.preview)}</div>
                            </div>`;
                            delete result.result.preview; // Don't show in JSON
                        }
                        html += `<strong>Test Results:</strong><br><pre>${JSON.stringify(result.result, null, 2)}</pre>`;
                    }
                    
                    html += `</div>`;
                } else {
                    html += `<div class="test-result">
                        <strong>Error:</strong> ${result.error}
                    </div>`;
                }
                
                html += `</div>`;
            }
            
            html += `</div>`;
            return html;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Auto-run tests on page load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runAllHtmlTests, 1000);
        });
    </script>
</body>
</html>